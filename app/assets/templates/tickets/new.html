<div ng-controller="TicketNewCtrl">
	<div class="page-header">
		<div class="page-title">
			<h3 id="ticket">{{ title }}</h3>
		</div>

		<ul class="page-stats">
		</ul>
	</div>

<form class="form-horizontal row-border" ng-submit="createTicket()"  name="ticketForm" novalidate>
	<div class="row">
		<div class="col-md-12">
			<div class="widget box">
				<div class="widget-header">
					<h4>
						<i class="fa fa-info"></i>
						Please enter ticket info
					</h4>
				</div>

 				<!-- Widget content -->
				<div class="widget-content">
						<!-- title block -->
						<div class="form-group" ng-class="{'has-error': ticketForm.title.$dirty && ticketForm.title.$invalid, 'has-success': ticketForm.title.$dirty && ticketForm.title.$valid}" >
							<label class="col-md-2 control-label">Title: <span class="required">*</span></label>
							<div class="col-md-10">
								<input type="text" name="title" class="form-control" ng-model="ticket.title" required />
								<br />
								<label ng-show="ticketForm.title.$dirty && ticketForm.title.$invalid" ng-class="{'has-error': ticketForm.title.$invalid, 'has-success': ticketForm.title.$valid}" >This field is required.</label>
							</div>
						</div>
						<!-- End title block -->

						<!-- description block -->
						<div class="form-group">
							<label class="col-md-2 control-label">Description:</label>
							<div class="col-md-10">
								<textarea rows="10" cols="5"  ng-model = "ticket.description" name="description" class="auto form-control"></textarea>
							</div>
						</div>
						<!-- End description block --> 

						<!-- description block -->
						<div class="form-group">
							<label class="col-md-2 control-label">Customer Name:</label>
							<div class="col-md-10">
								<div class="row">
									<div class="col-md-3">
									   <input class="form-control input-width-medium" type="text" placeholder="First Name" ng-model="ticket.first_name" />
									</div>
									<div class="col-md-3">
						      			<input class="form-control input-width-medium" type="text" placeholder="Last Name" ng-model="ticket.last_name" />
								    </div>
								</div>
	
							</div>
						</div>
						<!-- End description block --> 

												<!-- description block -->
						<div class="form-group">
							<label class="col-md-2 control-label">Phone:</label>
							<div class="col-md-10">
 								<input class="form-control input-width-large" type="text" placeholder="Customer Phone Number" ng-model="ticket.phone_number" />
							</div>
						</div>

						<!-- End description block --> 

						<!-- customer info block -->
						<div class="form-group">
							<label class="col-md-2 control-label">Customer Address:</label>
							<div class="col-md-10">
								

								<input class="form-control input-width-xlarge" type="text" ng-model="ticket.address" placeholder="Please enter the address" /><br />

						        <div class="row">
						        	<div class="col-md-2">
							        	<input class="form-control input-width-medium" type="text" placeholder="City" ng-model="ticket.city" />
							        </div>
							        <div class="col-md-2">
							        	<input class="form-control input-width-medium" type="text" placeholder="Province" ng-model="ticket.province"/>
							    	</div>
							    	<div class="col-md-2">
							    		<input class="form-control input-width-medium" type="text" placeholder="Postal Code" ng-model="ticket.postal_code" />
							    	</div>
 						        </div>

						    </div>
						</div>
					    <!-- End customer info -->

					    <!-- address confirmed group --> 
						<div class="form-group">
							<label class="col-md-2 control-label">Confirm Address</label>
							<div class="col-md-10">
								<div class="make-switch" on-button ng-model="ticket.confirm_address">
								
								</div>
							</div>
						</div>
						<!-- address confirmed -->

						<!-- Set in date -->
						<div class="form-group">
							<label class="col-md-2 control-label">Date In</label>
							<div class="col-md-3">
								<div date-picker ng-model="ticket.date_in" >
								</div>
							</div>
						</div>
					    <!-- End Set in Date --> 

				</div>
				<!-- End Widget content -->
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<div class="widget box">
				<div class="widget-header">
					<h4>Additional Information</h4>
				</div>

				<div class="widget-content">

					<!-- Assign to Block -->
					<div class="row">
						<label class="col-md-2 control-label">Assign To:</label>
						<div class="col-md-10">
							<div class="row">
								<div class="col-md-4">
									<select class="form-control" ng-model="ticket.assignee_id" ng-options="(d.first_name + ' ' + d.last_name) for d in users">
									</select>
								</div>
							</div>
						</div>
					</div>
					<!-- End Assign to Block -->

					<br />

					<!-- Department block -->
					<div class="row">
						<label class="col-md-2 control-label">Departments:</label>
						<div class="col-md-10">
							<div class="row">
								<div class="col-md-4">
									<select class="form-control" ng-model="ticket.department_id" ng-options="d.department_name  for d in departments" required />
										<option value="">Select Option</option>
									</select>
								</div>
							</div>
						</div>
					</div>
					<!-- Department Block End --> 
					<br />
					<br />
  					<div class="row">
  						<div class="col-md-10">
  							<h4>Product Information</h4>
  						</div>
  					</div>
					
					<!-- product table -->
					<div class="row">
						<div class="col-md-1">
						<div class="col-md-11">
							<table class="table table-striped table-bordered table-hover table-checkable datatable">
								<thead>
									<tr>
										<th>
											Style Name
										</th>
										<th>
											Size
										</th>
										<th>
											Color
										</th>
										<th>
											Description
										</th>
										<th>
											Po Number
										</th>
									</tr>
									<tr ng-repeat="prod in ticket.products">
										<td>
											{{ prod.style_name }}
										</td>

										<td>
											{{ prod.size }}
										</td>

										<td>
											{{ prod.color }}
										</td>

										<td>
											{{ prod.description }}
										</td>

										<td>
											{{ prod.po_number }}
										</td>

									</tr>
									<tr>
										<td>
											<input type="text" ng-model = "product.style_name" placeholder="Enter Product Style"/>
										</td>
										<td>
											<input type="text" ng-model = "product.size" placeholder="Product Size"/>
										</td>
										<td>
											<input type="text" ng-model = "product.color" placeholder="Product Color"/>
										</td>
										<td>
											<input type="text" ng-model = "product.description" placeholder="Product Description"/>
										</td>
										<td>
											<input type="text" ng-model = "product.po_number" placeholder="Product PO Number"/>
										</td>
									</tr>
									<tr>
										<td colspan="5">
											<input type="button" ng-click="addProduct()" value="Add New"/>
										</td>
									</tr>
								</thead>
							</table>
						</div>
					</div>
				</div>
			    <!-- product table -->
			</div>
		</div>
	</div>

	<div class="form-actions">
		<input type="submit"  ng-disabled="!ticketForm.$valid" class="btn btn-primary pull-right" value="Create New Ticket">
	</div>
	</form>
</div>


